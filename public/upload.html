<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>LIM BOOK</title>

    <link rel="icon" href="./images/limbook.ico" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reset-css@5.0.1/reset.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" href="./css/common.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/list.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.2/css/bootstrap-slider.min.css"
      integrity="sha256-G3IAYJYIQvZgPksNQDbjvxd/Ca1SfCDFwu2s2lt0oGo="
      crossorigin="anonymous"
    />

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.21/lodash.min.js"
      integrity="sha512-WFN04846sdKMIP5LKNphMaWzU7YpMyCU245etK3g/2ARYbPK9Ub18eG+ljU96qKRCWh+quCY7yefSmlkQw1ANQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <!-- GSAP & ScrollToPlugin -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"
      integrity="sha512-H6cPm97FAsgIKmlBA4s774vqoN24V5gSQL4yBTDOY2su2DeXZVhQPxFK4P6GPdnZqM9fg1G3cMv5wD7e6cFLZQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollToPlugin.min.js"
      integrity="sha512-agNfXmEo6F+qcj3WGryaRvl9X9wLMQORbTt5ACS9YVqzKDMzhRxY+xjgO45HCLm61OwHWR1Oblp4QSw/SGh9SA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <!-- SWIPER -->
    <link rel="stylesheet" href="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper@6.8.4/swiper-bundle.min.js"></script>

    <!-- ScrollMagic -->
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.8/ScrollMagic.min.js"
      integrity="sha512-8E3KZoPoZCD+1dgfqhPbejQBnQfBXe8FuwL4z/c8sTrgeDMFEnoyTlH3obB4/fV+6Sg0a0XF+L/6xS4Xx1fUEg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script defer src="./js/youtube.js"></script>
    <script defer src="./js/common.js"></script>
    <script defer src="./js/main.js"></script>

    <script src="/js/includeHTML.js"></script>
  </head>
  <body>
    <!-- HEADER -->
    <header w3-include-html="/header.html"></header>

    <!-- 상품 판매 -->
    <section class="book-list">
      <div class="container mt-3">
        <input type="text" class="form-control mt-2" id="title" placeholder="title" />
        <textarea class="form-control mt-2" id="content" placeholder="content"></textarea>
        <input type="text" class="form-control mt-2" id="price" placeholder="price" />
        <input class="form-control mt-2" type="file" id="image" />
        <input class="form-control mt-2" type="text" id="category" placeholder="category" />
        <button class="btn btn-danger mt-3" id="send">올리기</button>
      </div>
    </section>

    <!-- FIND A BOOK -->
    <!-- <section class="find-book scroll-spy">
    <div class="inner">

      <img src="./images/use_limbook_texture1.png" alt="배경 아이콘1" class="texture1" />
      <img src="./images/use_limbook_texture2.png" alt="배경 아이콘2" class="texture2" />
      <img src="./images/use_limbook_picture1.jpg" alt="사진1" class="picture picture1 back-to-position to-right delay-0" />
      <img src="./images/use_limbook_picture2.jpg" alt="사진2" class="picture picture2 back-to-position to-right delay-1" />

      <div class="text-group">
        <img src="./images/use_limbook_text1.png" alt="림북을 통해 교재를 거래해보세요." class="title back-to-position to-left delay-0" />
        <img src="./images/use_limbook_text2.png" alt="구입하고! 대출하고! 판매/대여!" class="description back-to-position to-left delay-1" />
        <div class="more back-to-position to-left delay-2">
          <a href="javascript:void(0)" class="btn">도서 구경하기</a>
        </div>
      </div>
      
    </div>
  </section> -->

    <!-- SITE-LINK-->
    <section class="site-link">
      <div class="inner">
        <div class="swiper-container">
          <div class="swiper-wrapper">
            <div class="swiper-slide">
              <a href="http://www.yes24.com/Main/default.aspx">
                <img src="./images/site_slide1.jpg" alt="예스24" />
              </a>
            </div>
            <div class="swiper-slide">
              <a href="http://lib.daelim.ac.kr/">
                <img src="./images/site_slide2.jpg" alt="수암도서관" />
              </a>
            </div>
            <div class="swiper-slide">
              <a href="https://www.aladin.co.kr/home/welcome.aspx">
                <img src="./images/site_slide3.jpg" alt="알라딘" />
              </a>
            </div>
            <div class="swiper-slide">
              <a href="http://www.interpark.com/malls/index.html?gateTp=1">
                <img src="./images/site_slide4.jpg" alt="인터파크" />
              </a>
            </div>
            <div class="swiper-slide">
              <a href="https://www.daangn.com/">
                <img src="./images/site_slide5.jpg" alt="당근마켓" />
              </a>
            </div>
            <div class="swiper-slide">
              <a
                href="https://cafe.naver.com/joonggonara.cafe?iframe_url=/ArticleList.nhn%3Fsearch.clubid=10050146%26search.boardtype=L%26viewType=pc"
              >
                <img src="./images/site_slide6.jpg" alt="중고나라" />
              </a>
            </div>
            <div class="swiper-slide">
              <a href="https://m.bunjang.co.kr/">
                <img src="./images/site_slide7.jpg" alt="번개장터" />
              </a>
            </div>
          </div>
        </div>

        <div class="swiper-prev">
          <div class="material-icons">arrow_back</div>
        </div>
        <div class="swiper-next">
          <div class="material-icons">arrow_forward</div>
        </div>
      </div>
    </section>

    <!-- FOOTER -->
    <footer w3-include-html="/footer.html"></footer>

    <div id="to-top">
      <div class="material-icons">arrow_upward</div>
    </div>

    <!--header footer합치기 -->
    <script>
      includeHTML();
    </script>

    <!-- Firebase Code -->
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-storage.js"></script>

    <script
      src="https://code.jquery.com/jquery-3.6.0.min.js"
      integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
      crossorigin="anonymous"
    ></script>

    <script type="module" src="/js/firebaseConfig.js"></script>
    <script type="module" src="/js/loginCheck.js"></script>

    <script type="module">
      import { db, storage } from "/js/firebaseConfig.js";

      $("#send").click(function () {
        var file = document.querySelector("#image").files[0];

        var storageRef = storage.ref();
        var savedurl = storageRef.child("image/" + file.name);
        var uploaded = savedurl.put(file);

        uploaded.on(
          "state_changed",
          // 변화시 동작하는 함수
          null,
          //에러시 동작하는 함수
          (error) => {
            console.error("실패사유는", error);
          },
          // 성공시 동작하는 함수
          () => {
            uploaded.snapshot.ref.getDownloadURL().then((url) => {
              var savequery = {
                title: $("#title").val(),
                price: $("#price").val(),
                date: new Date(),
                category: $("#category").val(),
                img: url,
                uid: JSON.parse(localStorage.getItem("user")),
              };

              db.collection("product")
                .add(savequery)
                .then((result) => {
                  window.location.href = "./list.html";
                })
                .catch((err) => {
                  console.log(err);
                });
            });
          }
        );
      });
    </script>
  </body>
</html>
